测试名称: 测试 #1: 登录测试
测试命令:
curl -s -X POST 'http://localhost:8080/api/common/login'  -H 'Content-Type: application/json'  -d '{"username":"nonexist_user","password":"any_password"}'

# 测试2: 密码错误
测试结果:
{"code":401,"result":null,"message":"用户不存在","timestamp":1748155723978}
----------------------------------------

测试名称: 测试 #2: 登录测试
测试命令:
curl -s -X POST 'http://localhost:8080/api/common/login'  -H 'Content-Type: application/json'  -d '{"username":"admin","password":"wrong_password"}'

# 测试3: 登录成功
测试结果:
{"code":402,"result":null,"message":"密码错误","timestamp":1748155724305}
----------------------------------------

测试名称: 测试 #3: 登录测试
测试命令:
curl -s -X POST 'http://localhost:8080/api/common/login'  -H 'Content-Type: application/json'  -d '{"username":"admin","password":"ycbd1234"}'

# 二、SQL注入防护测试
# 测试4: 用户名包含SQL注入字符
测试结果:
{"code":200,"result":{"create_by":1,"update_time":1732014491000,"last_login_time":1748155611849,"create_time":1732014491000,"org_id":1,"real_name":"admin","id":1,"update_by":1,"role_ids":"admin","username":"admin","status":1,"token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I"},"message":null,"timestamp":1748155724553}
----------------------------------------

测试名称: 测试 #4: 新增用户
测试命令:
curl -s -X POST 'http://localhost:8080/api/common/save'  -H 'Content-Type: application/json'  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I'  -d '{"targetTable":"sys_user","username":"test_user_sql","password":"123456","real_name":"SQL注入测试","status":1}'

# 测试5: 密码包含SQL注入字符
测试结果:
{"code":400,"result":null,"message":"数据不存在[org.org_id]: 所选组织机构不存在, 提供的值: null","timestamp":1748155724826}
----------------------------------------

测试名称: 测试 #5: 新增用户
测试命令:
curl -s -X POST 'http://localhost:8080/api/common/save'  -H 'Content-Type: application/json'  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I'  -d '{"targetTable":"sys_user","username":"test_user2","password":"123456_sql","real_name":"SQL注入测试","status":1}'

# 测试6: 其他字段包含SQL注入字符
测试结果:
{"code":400,"result":null,"message":"数据不存在[org.org_id]: 所选组织机构不存在, 提供的值: null","timestamp":1748155725132}
----------------------------------------

测试名称: 测试 #6: 新增用户
测试命令:
curl -s -X POST 'http://localhost:8080/api/common/save'  -H 'Content-Type: application/json'  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I'  -d '{"targetTable":"sys_user","username":"test_user3","password":"123456","real_name":"测试用户_sql","email":"test@example.com","status":1}'

# 三、字段验证测试
# 测试7: 缺少必填字段(用户名)
测试结果:
{"code":400,"result":null,"message":"数据不存在[org.org_id]: 所选组织机构不存在, 提供的值: null","timestamp":1748155725438}
----------------------------------------

测试名称: 测试 #7: 新增用户
测试命令:
curl -s -X POST 'http://localhost:8080/api/common/save'  -H 'Content-Type: application/json'  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I'  -d '{"targetTable":"sys_user","password":"123456","real_name":"测试用户","status":1}'

# 测试8: 缺少必填字段(密码)
测试结果:
{"code":400,"result":null,"message":"数据不存在[org.org_id]: 所选组织机构不存在, 提供的值: null","timestamp":1748155725748}
----------------------------------------

测试名称: 测试 #8: 新增用户
测试命令:
curl -s -X POST 'http://localhost:8080/api/common/save'  -H 'Content-Type: application/json'  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I'  -d '{"targetTable":"sys_user","username":"test_user4","real_name":"测试用户","status":1}'

# 测试9: 邮箱格式错误
测试结果:
{"code":400,"result":null,"message":"数据不存在[org.org_id]: 所选组织机构不存在, 提供的值: null","timestamp":1748155726078}
----------------------------------------

测试名称: 测试 #9: 新增用户
测试命令:
curl -s -X POST 'http://localhost:8080/api/common/save'  -H 'Content-Type: application/json'  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I'  -d '{"targetTable":"sys_user","username":"test_user5","password":"123456","real_name":"测试用户","email":"invalid_email","status":1}'

# 测试10: 手机号格式错误
测试结果:
{"code":400,"result":null,"message":"数据不存在[org.org_id]: 所选组织机构不存在, 提供的值: null","timestamp":1748155726380}
----------------------------------------

测试名称: 测试 #10: 新增用户
测试命令:
curl -s -X POST 'http://localhost:8080/api/common/save'  -H 'Content-Type: application/json'  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I'  -d '{"targetTable":"sys_user","username":"test_user6","password":"123456","real_name":"测试用户","phone":"invalid_phone","status":1}'

# 测试11: 重复注册(使用已存在的用户名)
测试结果:
{"code":400,"result":null,"message":"数据不存在[org.org_id]: 所选组织机构不存在, 提供的值: null","timestamp":1748155726714}
----------------------------------------

测试名称: 测试 #11: 新增用户
测试命令:
curl -s -X POST 'http://localhost:8080/api/common/save'  -H 'Content-Type: application/json'  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I'  -d '{"targetTable":"sys_user","username":"admin","password":"123456","real_name":"测试用户","status":1}'

# 四、完整的用户管理流程测试
# 测试12: 成功注册新用户
测试结果:
{"code":400,"result":null,"message":"数据已存在[sys_user.username]: 用户名已存在, 提供的值: admin; 数据不存在[org.org_id]: 所选组织机构不存在, 提供的值: null","timestamp":1748155727020}
----------------------------------------

测试名称: 测试 #12: 新增用户
测试命令:
curl -s -X POST 'http://localhost:8080/api/common/save'  -H 'Content-Type: application/json'  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I'  -d '{"targetTable":"sys_user","username":"test_complete_user","password":"test123456","real_name":"完整测试用户","phone":"13800138001","email":"test_complete@example.com","org_id":1,"role_ids":"1,2","age":25,"status":1}'

# 测试13: 查询新用户
测试结果:
{"code":400,"result":null,"message":"数据已存在[sys_user.username]: 用户名已存在, 提供的值: test_complete_user; 数据已存在[sys_user.phone]: 手机号已被使用, 提供的值: 13800138001; 数据已存在[sys_user.email]: 邮箱已被使用, 提供的值: test_complete@example.com","timestamp":1748155727356}
----------------------------------------

测试名称: 测试 #13: 查询用户列表
测试命令:
curl -s -X GET "http://localhost:8080/api/common/list?pageIndex=0&pageSize=20&targetTable=sys_user&columns=username,real_name,phone,email&username=test_complete_user"  -H "Accept: application/json"  -H "Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I"

# 测试14: 修改用户信息
测试结果:
{"code":200,"result":{"total":1,"items":[{"phone":"13800138001","real_name":"完整测试用户","email":"test_complete@example.com","username":"test_complete_user"}]},"message":null,"timestamp":1748155727550}
----------------------------------------

测试名称: 测试 #14: 新增用户
测试命令:
curl -s -X POST 'http://localhost:8080/api/common/save'  -H 'Content-Type: application/json'  -H 'Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I'  -d '{"targetTable":"sys_user","username":"test_complete_user","real_name":"已修改的测试用户","phone":"13800138002","email":"test_complete_updated@example.com","age":26,"status":1}'

# 测试15: 查询修改后的用户信息
测试结果:
{"code":400,"result":null,"message":"数据已存在[sys_user.username]: 用户名已存在, 提供的值: test_complete_user; 数据不存在[org.org_id]: 所选组织机构不存在, 提供的值: null","timestamp":1748155727868}
----------------------------------------

测试名称: 测试 #15: 查询用户列表
测试命令:
curl -s -X GET "http://localhost:8080/api/common/list?pageIndex=0&pageSize=20&targetTable=sys_user&columns=username,real_name,phone,email&username=test_complete_user"  -H "Accept: application/json"  -H "Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I"

# 测试16: 删除用户
测试结果:
{"code":200,"result":{"total":1,"items":[{"phone":"13800138001","real_name":"完整测试用户","email":"test_complete@example.com","username":"test_complete_user"}]},"message":null,"timestamp":1748155728067}
----------------------------------------

测试名称: 测试 #16: 删除用户
测试命令:
curl -X POST 'http://localhost:8080/api/common/delete'  -H 'Content-Type: application/json'  -H "Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I" -d '{
    "targetTable": "sys_user",
    "username": "test_complete_user"
}'

# 测试17: 确认用户已删除
测试结果:
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   164    0    93  100    71   1105    843 --:--:-- --:--:-- --:--:--  1952
{"code":400,"result":null,"message":"targetTable和id不能为空","timestamp":1748155728124}
----------------------------------------

测试名称: 测试 #17: 查询用户列表
测试命令:
curl -X GET "http://localhost:8080/api/common/list?pageIndex=0&pageSize=20&targetTable=sys_user&columns=username,real_name&username=test_complete_user"  -H "Accept: application/json"
   -H "Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I"
测试结果:
执行异常: 命令执行失败 [命令: curl -X GET "http://localhost:8080/api/common/list?pageIndex=0&pageSize=20&targetTable=sys_user&columns=username,real_name&username=test_complete_user"  -H "Accept: application/json"
   -H "Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NDgyNDIxMjQsInVzZXJJZCI6MSwib3JnSWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifQ.E6hAQRg5S3LlkTS-28p0rDArv6Cr1edMVPGWiNo5x8I", 退出码: 127] [错误输出: ]
----------------------------------------


执行总结:
执行总结:
总命令数: 17
成功数: 3
失败数: 14
